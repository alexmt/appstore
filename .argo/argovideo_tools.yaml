---
type: container
name: vnc-recorder
version: "1"
description: Base VNC recorder container
resources:
  mem_mib: 1024
  cpu_cores: 0.1
image: get.applatix.io/applatix/axvncrecorder:v1
env:
  - name: host
    value: "%%inputs.parameters.remote%%"
  - name: output
    value: "%%inputs.parameters.output%%"
inputs:
    parameters:
      remote:
      output:
outputs:
  artifacts:
    video:
      path: "%%output%%"

---
type: container
name: axvideo-converter
version: "1"
description: Convert FLV to MPEG
resources:
  mem_mib: 1024
  cpu_cores: 0.1
image: get.applatix.io/applatix/axvncrecorder:latest
command: ["sh", "-c"]
args: [ "mkdir -p /tmp/report && ffmpeg -i /tmp/video.flv -ar 22050 /tmp/report/video.mp4 && echo '<!DOCTYPE html><html><body><video width=\"640\" height=\"480\" controls><source src=\"video.mp4\" type=\"video/mp4\"></video></body></html>' > /tmp/report/index.html"]
inputs:
  artifacts:
    video_input:
      path: "/tmp"
outputs:
  artifacts:
    video:
      path: "/tmp/report"
      meta_data:
      - browsable